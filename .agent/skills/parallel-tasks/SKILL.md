---
name: Parallel Task Execution
description: 멀티 에이전트 병렬 실행, 서브에이전트 오케스트레이션, 일괄 빌드/커밋/푸시. 다중 요청 처리 및 복잡한 작업 분할 시 즉시 사용.
---

# Parallel Task Execution Skill

## 핵심 원칙

> [!IMPORTANT]
> **다중 요청 시 일괄 커밋 필수**
> 사용자가 여러 개를 요청하면 **모든 수정 완료 후** 한 번에 빌드/커밋/푸시

> [!IMPORTANT]
> **항상 Task List + Walkthrough 생성**
> 작업 시작 전 TodoWrite로 작업 목록 생성, 진행 상황 실시간 업데이트

## 서브에이전트 병렬 실행

### Task tool 활용 패턴

```
[다중 요청 수신]
       │
       ▼
[의존성 분석]
       │
       ├── 독립 작업들 ──→ 서브에이전트 병렬 배치 (최대 4개)
       │                    ├── Agent 1: explore (코드베이스 탐색)
       │                    ├── Agent 2: generalPurpose (기능 구현)
       │                    ├── Agent 3: generalPurpose (기능 구현)
       │                    └── Agent 4: explore (테스트/문서 조사)
       │
       └── 의존 작업들 ──→ 순서 결정 후 순차 실행
       │
       ▼
[결과 통합 → 빌드 검증 → 단일 커밋]
```

### 서브에이전트 유형 선택

| 유형 | 용도 | 비용 |
|------|------|------|
| `explore` | 코드 탐색, 파일 검색, 패턴 분석 | 낮음 |
| `generalPurpose` | 코드 구현, 복잡한 분석 | 중간 |
| `fast` (model) | 간단한 작업, 포맷팅, 리네이밍 | 최저 |

### 병렬 가능 판단 매트릭스

| 작업 A ↓ \ 작업 B → | 다른 파일 | 같은 파일 다른 함수 | 같은 파일 같은 위치 | A의 타입 사용 |
|---------------------|-----------|-------------------|-------------------|--------------|
| 독립 기능 | ✅ 병렬 | ✅ 병렬 | ❌ 순차 | ❌ 순차 |
| UI 컴포넌트 | ✅ 병렬 | ⚠️ 주의 | ❌ 순차 | ❌ 순차 |
| DB 스키마 변경 | ⚠️ FK확인 | ❌ 순차 | ❌ 순차 | ❌ 순차 |
| 테스트 작성 | ✅ 병렬 | ✅ 병렬 | ✅ 병렬 | ❌ 순차 |

## 실행 패턴별 예시

### 패턴 1: 독립 기능 3개 병렬
```
요청: "히어로 애니메이션, 이미지 모달, 팀 탈퇴 기능 구현"

분석:
  T1: LandingPage.tsx (히어로) — 독립
  T2: ImageUploadModal.tsx (새 파일) — 독립
  T3: TeamSettingsPage.tsx (탈퇴) — 독립

실행: 3개 서브에이전트 동시 실행
→ 결과 통합 → npm run build → 단일 커밋
```

### 패턴 2: 의존성 있는 작업
```
요청: "새 테이블 만들고, 서비스 코드 작성하고, UI 컴포넌트 만들어"

분석:
  T1: 마이그레이션 (테이블 생성) — 선행 필수
  T2: 서비스 레이어 (T1 의존) — T1 후
  T3: UI 컴포넌트 (T2 의존) — T2 후

실행: T1 → T2 → T3 순차
```

### 패턴 3: 하이브리드 (병렬 + 순차)
```
요청: "사이드바 디자인 변경, 새 API 엔드포인트, 관련 테스트"

분석:
  T1: 사이드바 UI (독립)
  T2: API 엔드포인트 (독립)
  T3: API 테스트 (T2 의존)

실행:
  Phase 1: T1 + T2 (병렬)
  Phase 2: T3 (T2 완료 후)
```

## 빌드 및 커밋 파이프라인

### 전체 검증 (모든 변경 완료 후)
```bash
# 1. TypeScript 타입 검증
npx tsc --noEmit

# 2. 빌드 검증
npm run build

# 3. 테스트 실행
npm run test

# 4. Lint 검증 (ReadLints 도구 사용)
```

### 일괄 커밋
```bash
git add -A && git commit -m "$(cat <<'EOF'
feat(scope): 요약 메시지

- 기능 A 설명
- 기능 B 설명
- 기능 C 설명
EOF
)" && git push origin develop
```

## 충돌 방지 규칙

1. **같은 파일 다중 수정 금지**: 같은 파일을 여러 서브에이전트가 동시 수정하면 마지막 것만 적용
2. **타입 의존성**: 새 타입 정의 → 해당 타입 사용 코드 순서
3. **import 경로**: 새 파일 생성 시 다른 파일의 import 경로 확인
4. **DB 스키마**: 마이그레이션 → 서비스 코드 → UI 순서

## 대규모 작업 분할 전략

### 파일 수 기준
| 변경 파일 수 | 전략 |
|-------------|------|
| 1-3개 | 직접 순차 처리 |
| 4-8개 | 2-3개 서브에이전트 병렬 |
| 9개 이상 | 4개 서브에이전트 + 단계별 실행 |

### 복잡도 기준
| 복잡도 | 전략 |
|--------|------|
| 단순 (포맷, 리네이밍) | fast 모델로 빠르게 |
| 중간 (새 컴포넌트, 서비스) | generalPurpose |
| 복잡 (아키텍처, DB 설계) | explore → plan → generalPurpose |

## 체크리스트

### 시작 전
- [ ] TodoWrite로 Task List 생성
- [ ] 의존성 그래프 분석
- [ ] 병렬/순차 분류 완료
- [ ] 파일 충돌 가능성 점검

### 완료 후
- [ ] 전체 TypeScript 검증 통과
- [ ] 빌드 성공
- [ ] 기존 테스트 통과
- [ ] 단일 커밋 메시지 작성
- [ ] Walkthrough 완성
